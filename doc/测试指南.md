# DegenTempo 本地开发与测试指南

本文档旨在指导开发人员在本地环境中启动并测试 DegenTempo 项目的核心功能。

## ✅ 环境准备与修复

在开始测试前，请确保本地环境配置已修复（已在 `.env.local` 中更新）：
*   **修复项**: 补充了缺失的 `NEXT_PUBLIC_USDC_ON_TEMPO_ADDRESS` 环境变量。
*   **当前环境**: Base Sepolia 测试网。

## 🧪 详细测试步骤

### 1. 启动与访问
*   **操作**: 确保开发服务器正在运行 (`npm run dev`)。
*   **地址**: 在浏览器打开 `http://localhost:3000`。
*   **预期**: 页面正常加载，显示 "Login with Farcaster" 欢迎界面。

### 2. 身份验证 (Auth)
*   **操作**: 点击登录按钮。
*   **说明**:
    *   Privy 会引导进行 Farcaster 登录（支持扫码或模拟）。
    *   登录成功后将自动重定向至 Dashboard。
*   **验证**:
    *   进入 Dashboard 主界面。
    *   系统会在后台为你自动生成 **Smart Wallet (AA)** 地址。
    *   你可以在界面上看到钱包余额等信息。

### 3. 准备测试代币 (Base Sepolia)
项目目前运行在 **Base Sepolia** 测试网。你需要确保 Smart Wallet 中有足够的资产用于测试。

*   **ETH (Gas)**:
    *   尽管项目支持 Paymaster 代付 Gas，但建议钱包中保留少量 ETH 以防底层检查机制报错。
    *   *领取地址 (推荐)*: [Alchemy Base Sepolia Faucet](https://www.alchemy.com/faucets/base-sepolia) (需登录)
    *   *备用地址 1*: [Coinbase Developer Platform Faucet](https://portal.cdp.coinbase.com/products/faucet) (Coinbase 官方)
    *   *备用地址 2*: [QuickNode Faucet](https://faucet.quicknode.com/base/sepolia) (需推特验证)
    *   *备用地址 3*: [Chainlink Faucet](https://faucets.chain.link/base-sepolia) (支持多种资产)
    *   *备用地址 4*: [ETHGlobal Faucet](https://ethglobal.com/faucet) (需 ETHGlobal 账号)
*   **DEGEN / USDC (测试币)**:
    *   项目核心逻辑是将 DEGEN 兑换为 USDC。
    *   **注意**: 必须确保你持有的 DEGEN 测试币在 Base Sepolia 的 Uniswap 或其他 DEX 上有流动性池，否则 LI.FI 无法提供报价。
    *   *如果无法获取 DEGEN 测试币*: 
        *   我们已支持通过环境变量切换测试代币。
        *   在 `.env.local` 中设置 `NEXT_PUBLIC_USE_NATIVE_TOKEN=true`，即可使用 **ETH** 进行测试（无需修改代码）。
        *   设置 `NEXT_PUBLIC_USE_NATIVE_TOKEN=false` 或删除该变量，则恢复使用 **DEGEN**。

### 4. 核心流程测试 (Quote & Swap)
1.  **输入金额**: 在 Dashboard 输入想要兑换的 DEGEN 数量（例如 10）。
2.  **获取报价 (Get Quote)**: 点击按钮，系统调用 LI.FI SDK。
    *   *成功*: 显示预估接收 USDC 数量、路由路径及 "Sponsored" Gas 状态。
    *   *失败*: 若提示 "No routes found"，通常是因为测试网缺乏流动性。
3.  **确认兑换 (Confirm Swap)**: 点击确认。
    *   **签名**: Privy 弹出签名请求（签署 UserOperation）。
    *   **上链**: 等待交易提交并上链，观察界面成功提示。

### 5. 查看历史与状态
*   切换到 **Transaction History** 标签页。
*   验证刚才的交易记录是否存在，且状态最终变为 `COMPLETED`。

## ⚠️ 注意事项与常见问题

*   **跨链限制**: 当前开发环境配置为 **Base Sepolia** 单链测试（Base -> Base 模拟），因为 Tempo 链可能暂无公开测试网。
*   **Stripe 出金**: 测试网模式下，出金功能仅模拟 Stripe API 调用，不会发生真实银行转账。请在 Stripe Dashboard 查看测试数据。
*   **Paymaster**: 如果交易失败提示 Gas 相关错误，请检查 Alchemy Dashboard 中的 Paymaster Policy 余额是否充足。
